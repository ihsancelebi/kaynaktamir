<!DOCTYPE html>
<html lang="tr">
<head>
    <!-- Mevcut head içeriği -->
    <style>
        /* Giriş formu stilleri (index-6.html ile aynı) */
        .login-container {
            /* ... index-6.html'deki giriş formu stilleri ... */
        }
        
        .user-info {
            /* ... index-6.html'deki kullanıcı bilgisi stilleri ... */
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Giriş formu -->
        <div id="login-container" class="login-container">
            <!-- ... index-6.html'deki giriş formu içeriği ... -->
        </div>
        
        <!-- Uygulama içeriği -->
        <div id="app-content" class="hidden">
            <div class="header">
                <div class="language-selector">
                    <!-- Mevcut dil seçici -->
                </div>
                <div class="user-info">
                    <span id="user-email"></span>
                    <button class="logout-btn" onclick="logout()" data-tr="Çıkış Yap" data-en="Logout">Çıkış Yap</button>
                </div>
                <div class="connection-status" id="connection-status">
                    <!-- Bağlantı durumu -->
                </div>
                <!-- Diğer header içeriği -->
            </div>
            <!-- Diğer uygulama içeriği -->
        </div>
    </div>

    <script>
        // index-6.html'deki kullanıcı yönetim kodunun aynısı
        // (initializeFirebase, auth işlemleri, Firestore filtreleme)
        
        // Kayıtları yükleme fonksiyonunu güncelle
        function loadRepairs() {
            // ... mevcut kod ...
            
            // Sadece kullanıcının kendi kayıtlarını yükle
            db.collection('repairs')
                .where('userId', '==', currentUser.uid)
                .orderBy('createdAt', 'desc')
                .onSnapshot(snapshot => {
                    // ... mevcut kod ...
                });
        }
        
        // Tamir tamamlama fonksiyonunu güncelle
        async function completeRepair(repairId) {
            // ... mevcut kod ...
            
            // Kaydın kullanıcıya ait olduğunu doğrula
            const repairRef = db.collection('repairs').doc(repairId);
            const doc = await repairRef.get();
            
            if (!doc.exists || doc.data().userId !== currentUser.uid) {
                showMessage(t('accessDenied'), 'error');
                return;
            }
            
            // ... mevcut tamamlama kodu ...
        }
    </script>
</body>
</html>
