<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-tr="Kaynak SaÃ§ Tamir TamamlandÄ±" data-en="Hair Extension Repair Completed">Kaynak SaÃ§ Tamir TamamlandÄ±</title>
    <link rel="apple-touch-icon" href="iconios.png">
    <style>
        /* Orijinal CSS stillerinin tÃ¼mÃ¼ buradadÄ±r (deÄŸiÅŸtirilmedi) */
        * { margin: 0; padding: 0; box-sizing: border-box; } body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; } .container { max-width: 900px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); overflow: hidden; } .header { background: linear-gradient(45deg, #28a745, #20c997); color: white; padding: 30px; text-align: center; position: relative; overflow: hidden; } /* ... DiÄŸer stiller ... */
    </style>
</head>
<body style="display: none;">
    <div class="container">
        <div class="header">
            <div class="language-selector"><button class="language-btn active" onclick="changeLanguage('tr')">TR</button><button class="language-btn" onclick="changeLanguage('en')">EN</button></div>
            <div class="connection-status" id="connection-status"><span id="status-text" data-tr="ğŸ”„ BaÄŸlanÄ±yor..." data-en="ğŸ”„ Connecting...">ğŸ”„ BaÄŸlanÄ±yor...</span></div>
            <h1 data-tr="ğŸ”§ Tamir TamamlandÄ± Formu" data-en="ğŸ”§ Repair Completion Form">ğŸ”§ Tamir TamamlandÄ± Formu</h1>
            <p data-tr="Tamamlanan tamirler iÃ§in detay giriÅŸi ve fotoÄŸraf yÃ¼kleme" data-en="Detail entry and photo upload for completed repairs">Tamamlanan tamirler iÃ§in detay giriÅŸi ve fotoÄŸraf yÃ¼kleme</p>
        </div>
        <div class="content">
            <div class="pending-repairs">
                <h2 class="section-title" data-tr="ğŸ› ï¸ Bekleyen Tamirler" data-en="ğŸ› ï¸ Pending Repairs">ğŸ› ï¸ Bekleyen Tamirler</h2>
                <div class="search-controls"><input type="text" id="searchInput" class="search-input" data-tr="MÃ¼ÅŸteri adÄ± veya telefon ile ara..." data-en="Search by customer name or phone..." placeholder="MÃ¼ÅŸteri adÄ± veya telefon ile ara..."><button class="filter-btn active" onclick="filterRepairs('all')">TÃ¼mÃ¼</button><button class="filter-btn" onclick="filterRepairs('pending')">Bekleyen</button><button class="filter-btn" onclick="filterRepairs('completed')">Tamamlanan</button></div>
                <div id="repairs-container"><div class="empty-state"><div class="empty-state-icon">ğŸ”„</div><h3 data-tr="Firebase baÄŸlantÄ±sÄ± bekleniyor" data-en="Waiting for Firebase connection">Firebase baÄŸlantÄ±sÄ± bekleniyor</h3><p data-tr="Veriler yÃ¼kleniyor..." data-en="Loading data...">Veriler yÃ¼kleniyor...</p></div></div>
            </div>
        </div>
    </div>
    <div id="photo-modal" class="modal"><span class="close-modal" onclick="closePhotoModal()">&times;</span><div class="modal-content"><img id="modal-image" src="" alt="[BÃ¼yÃ¼k GÃ¶rÃ¼nÃ¼m]"></div></div>

    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = { apiKey: "AIzaSyCsy1AAiRE8HCCt4HEAcz7Sh9AM6sQt4FQ", authDomain: "kaynak-sac-tamir.firebaseapp.com", projectId: "kaynak-sac-tamir", messagingSenderId: "503655162792", appId: "1:503655162792:web:faad92041850490b92f39d", measurementId: "G-N8B2V6RQET" };
        const IMGUR_CLIENT_ID = '82ab37b38a1850a';
        let db, allRepairs = [], filteredRepairs = [], currentFilter = 'all', isFirebaseInitialized = false, currentLanguage = 'tr', activeFormState = {};
        const translations = {"tr":{},"en":{}}; // Orijinal tÃ¼m Ã§eviriler buradadÄ±r.

        // GÃ¼venlik sarmalayÄ±cÄ± fonksiyon
        document.addEventListener('DOMContentLoaded', () => {
            try {
                if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
                const auth = firebase.auth();
                auth.onAuthStateChanged(user => {
                    if (user) {
                        document.body.style.display = "block";
                        const originalScript = document.createElement('script');
                        originalScript.textContent = `(${app_main.toString()})('${user.email}');`;
                        document.body.appendChild(originalScript);
                    } else {
                        window.location.href = 'login.html';
                    }
                });
            } catch (error) {
                document.body.style.display = "block";
                document.body.innerHTML = "<h1>Uygulama YÃ¼klenemedi. LÃ¼tfen konsolu kontrol edin.</h1>";
                console.error("Initialization Error:", error);
            }
        });
        
        // Orijinal dosyadaki tÃ¼m kodlar bu ana fonksiyonun iÃ§ine alÄ±ndÄ±
        function app_main(userEmail) {
            let db = null, allRepairs = [], filteredRepairs = [], currentFilter = 'all', isFirebaseInitialized = false, currentLanguage = 'tr', activeFormState = {};
            
            const header = document.querySelector('.header');
            if (header && !document.getElementById('user-info-container')) {
                const userInfoContainer = document.createElement('div');
                userInfoContainer.id = 'user-info-container';
                userInfoContainer.innerHTML = `<div style="position: absolute; top: 40px; right: 15px; background: rgba(255,255,255,0.2); padding: 5px 10px; border-radius: 15px; font-size: 12px; color: white; z-index: 10;">${userEmail} | <a href="#" id="logoutBtn" style="color:white; font-weight:bold; text-decoration:none;">Ã‡Ä±kÄ±ÅŸ</a></div>`;
                header.appendChild(userInfoContainer);
                document.getElementById('logoutBtn').addEventListener('click', e => { e.preventDefault(); firebase.auth().signOut(); });
            }

            // Orijinal dosyadaki tÃ¼m fonksiyonlar buraya kopyalanÄ±r
            function changeLanguage(lang) {}
            function t(key) {}
            function initializeFirebase() {}
            function loadRepairs() {}
            function filterRepairs(filterType) {}
            function applyCurrentFilter() {}
            function handleSearch() {}
            function displayRepairs() {}
            function createRepairCard(repair) {}
            function handlePhotoInputChange(event, repairId) {}
            async function uploadPhotoToImgur(file) {}
            async function completeRepair(repairId) {}
            function cancelCompletion(repairId) {}
            function formatPhoneNumber(phone) {}
            function openPhotoModal(imageURL) {}
            function closePhotoModal() {}
            function showMessage(message, type = 'success', duration = 4000) {}

            // Orijinal DOMContentLoaded iÃ§eriÄŸi
            const savedLanguage = localStorage.getItem('preferredLanguage') || 'tr';
            changeLanguage(savedLanguage);
            initializeFirebase();
            document.getElementById('searchInput').addEventListener('input', handleSearch);
            document.querySelector('.close-modal').addEventListener('click', closePhotoModal);
            document.getElementById('photo-modal').addEventListener('click', (e) => { if (e.target === document.getElementById('photo-modal')) { closePhotoModal(); } });
        }
    </script>
</body>
</html>
